"""
Esmerald settings for {{ project_name }} project.

Generated by 'esmerald createproject' using Esmerald {{ esmerald_version }}.
"""

from functools import cached_property
from typing import Optional

from edgy import Database, Registry
from edgy.testclient import DatabaseTestClient
from esmerald.conf.enums import EnvironmentType

from ..settings import AppSettings


class TestingAppSettings(AppSettings):
    debug: bool = True
    app_name: str = "My application in testing mode."
    title: str = "My {{ project_name }}"
    environment: Optional[str] = EnvironmentType.TESTING

    @cached_property
    def database(self) -> Database:
        """
        To make sure the registry database object and the database connection remains the same
        all the time, always use the cached_property.
        """
        return DatabaseTestClient(url=self.db_url)

    @cached_property
    def registry(self) -> Registry:
        """
        To make sure the registry and the database connection remains the same
        all the time, always use the cached_property.
        """
        return Registry(database=self.database)
